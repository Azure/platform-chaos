# Auditing

This document defines how Platform Chaos audits chaos events. It lists what is tracked and how it is formatted.

## Tracked Data

When a chaos event is initiated or terminated through an *API* or *CLI* the following properties are recorded and exported through a JSON object.

Every chaos event will be logged. The general structure of an event log for an *API* or *CLI* initiated event is defined below:

- _event log_ (Object)
  - `id` (String) 
    - GUID unique to this event instantiation
  - `type` (String) 
    - One of `'initiate'`, `'terminate'`
    - As extension functionality grows, more types can be added to this list. 
    - These exist for the purpose of filtering audits.
  - `user` (String)
    - Some identifiable piece of information specifying which user executed the chaos event
  - `system` (String | Object)
    - Some identifiable piece of information specifying which system the chaos event was executed from
    - If more system information can be provided, do so in the form of an object
  - `date` (String)
    - UTC timestamp of chaos event initiation
  - `resource` (String)
    - String representation of the resource targeted by the chaos
    - This is typically generated by `chaos resgen` and looks like so: `"subId/resGrpId/resName"`
  - `event` (String)
    - Chaos event identifier (can be name, uri, or something else) that denotes what was executed
  - `extension` (Object)
    - an optional object extension authors can utilize to log pertinant data relate to their module.

Here is an example template:

```json
{
  "id": "",
  "type": "initiate",
  "user": "",
  "system": "",
  "date": "",
  "resource": "",
  "event": "",
  "extension": {}
}
```

Additionally if an *Extension* emits an event, the logging schema will be slightly different.

- _event log_ (Object)
  - `eventId` (String) 
    - A unique identifier for the emitted event
  - `eventName` (String)
    - Some identifiable piece of information specifying the chaos event
  - `system` (String | Object)
    - Some identifiable piece of information specifying which system the chaos event was executed from
    - If more system information can be provided, do so in the form of an object
  - `date` (String)
    - UTC timestamp of chaos event initiation
  - `resource` (String)
    - String representation of the resource targeted by the chaos
    - This is typically generated by `chaos resgen` and looks like so: `"subId/resGrpId/resName"`
  - `extension` (Object)
    - an optional object extension authors can utilize to log pertinant data related to their module.

```json
{
  "eventId": "",
  "eventName": "",
  "system": "",
  "date": "",
  "resource": "",
  "extension": {}
}
```